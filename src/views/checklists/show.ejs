<%- include('../layouts/header', {title: checklist.name}) %> <%-
include('../layouts/menu') %>

<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-four-fifths">
                <h1 class="title size-4"><%= checklist.name %></h1>
            </div>
            <div class="column is-one-fifth">
                <a
                    href="/checklists/<%= checklist._id%>/tasks/new"
                    class="button is-success is-small"
                    >New Task</a
                >
                <a href="/checklists" class="button is-small">Back</a>
            </div>
        </div>

        <hr />

        <% checklist.tasks.forEach(task => { %>
        <div class="columns">
            <div
                class="column is-four-fifths <%= task.done ? 'has-text-success is-italic' : '' %>"
            >
                <input id="task-<%= checklist.tasks.indexOf(task) %>" type="checkbox" onchange="setTagAsDone(this, '<%=task._id%>')"
                <%= task.done ? 'checked' : '' %> />
                <label for="task-<%= checklist.tasks.indexOf(task) %>"><%= task.name %></label>
            </div>

            <div class="column is-one-fifth">
                <a
                    href="/tasks/<%= task._id %>?_method=delete"
                    class="button is-danger is-small"
                    >Remove</a
                >
            </div>
        </div>
        <% }) %>
    </div>
</section>

<%- include('../layouts/footer') %>
